:: Layer7 1 [layer7]
<<nobr>>
<<masteraudio stop>><<audio "layer7" volume 0.2 play loop>>
<<set $currentLayer = 7>>
<</nobr>>\
\
@@.layerTitle;
[img[setup.ImagePath+'Layer Intros/l7intro.png']]
!Layer 7 - Sealed City of Agartha
@@There is no gradual, graceful change in terrain dividing the sixth and seventh layers. The tentacles come to a sudden stop at a long series of metallic barricades, providin passage for travelers but apparently no surface for the tentacles to grow on. Grateful to leave behind the burning tendrils, you step through and are greeted with a sea of light, an enormous, city, buildings and roads expanding into the distance, yet also stacked haphazardly on top of each other in layers of chrome and neon, paved with metal. A microcosm of the Abyss itself, perhaps?

Yet for a city so large, it remains eerily quiet, the only sound being the quiet hum of robots patrolling the streets. There's no sign of any humans, or indeed any organic life at all. The city sleeps as robots silently perform their tasks, and it would be best to tread lightly, lest you wake it up.

This layer seems to be quite a bit smaller than the last few, and its paved roads are much easier to traverse. Ascending back into hell - that is, layer 6 - will take 7 days and cost 80 corruption.

[[Walk through the seventh layer of the Abyss|Layer7 Hub]]<<nobr>><<if $hiredCompanions.some(e => e.name === "Cherry")>>
	<<if $visitL7 == 0>>
	<br><<print "[[Use Cherry's chaotic luck|Layer7 Cherry]]">><</if>>
<</if>><</nobr>>


:: Layer7 Preview [image layer7]
As you bring the charm up to your eye and gaze deep into the red crystal, your vision fades and a new image comes clearly into view:

[img[setup.ImagePath+'Layer Intros/l7intro.png']]

@@.layerTitle;LAYER 7 - SEALED CITY OF AGARTHA@@

You see yourself standing in the midst of an enormous mechanical city, surrounded by artificial lights, towering buildings, and robotic drones moving busily throughout the layer. Suddenly the image shifts and you see the splendor of the Relics that are available on this layer.

[img[setup.ImagePath+'Clipped-Fin/Abyss Diver Page 8-relics.png']]

As an image of the wonders you might find on this layer starts to come into focus, an intense feeling of humility washes through you.

[img[setup.ImagePath+'Clipped-Fin/Abyss Diver Page 8-wonders.png']]

The mystical possibilities of the wonders fade from your view and you suddenly feel nauseous, as if a huge amount of miasma was suddenly sucked into your chest. You visualize the corruptions and Curses that may afflict you in the layer below.

[img[setup.ImagePath+'Clipped-Fin/Abyss Diver Page 8-curses.png']]

Finally the nauseous feeling passes but is replaced by a brief sense of terror as you get a glimpse of the threaths that await you on the layer

[img[setup.ImagePath+'Clipped-Fin/Abyss Diver Page 8-threats.png']]

Finally, the vision fades, leaving you standing once again where you were before, with only a brief sense of motion sickness as you orient yourself back to your physical body. As you look at the Gleam Dazer once again, you notice the Relic is cracked and broken.
<<nobr>>
<<if $ownedRelics.length==1>>
	<<set $temp=0>>
<<else>>
	<<for $i = 0; $i < $ownedRelics.length && !$endloop; $i++>>
		<<if $ownedRelics[$i].name=="Gleam Dazer" >>
			<<set $temp=$i>>
			<<set $endloop=false>>
		<</if>>
	<</for>>
<</if>>
<</nobr>>
[[Return|$previewReturn][$soldRelics.push($ownedRelics[$temp]), $ownedRelics.deleteAt($temp), $endloop=false]]


:: Layer7 Hub [layer7]
<<set $currentLayer = 7>><<checkTime>><<CarryAdjust>><<if $dubloons < 0>>[img[setup.ImagePath+'Threats/taxdrone.png']]

A quiet humming sound descends upon you as you see the Taxdrone floating towards you from over a nearby building. You reach into your pack to get your typical dubloon payment, but then you realize something is wrong, you can't find any dubloons! Perhaps you didn't keep track of them properly? But it's too late to get any now, the taxes are already due.

The Taxdrone patiently requests that you submit your taxes as it displays a slot for you to deposit the dubloons into, but soon it realizes you will not be paying and the typically soft blue lights on the drone change to glaring red and an alarm sounds.

Within a moment you are restrained by nets made of light and you feel a prick on your neck. You notice the drone has stabbed you with a syringe, but at this point it's too late to resist and your consciousness begins to fade, leaving you to succumb to your fate.

You are now forced to become a permanent resident of Layer 7.

[[Awaken to your new life|Layer7 Tax End]]
<<elseif $timeL7T2 < 6>><<set $layerExit = 0>>You walk through an enormous city coated in chrome and neon. On each side of the streets you can see enormous buildings with no open doors for you to enter. There are thousands of skyscrapers, yet not one person or animal in the entire city. Mechanical beings small and large scurry and float past, seemingly oblivious to your presence, as you are able to move through the empty metropolis completely unhindered.

<<nobr>>

<<if $visitL7 == 0>>
	<<set $layerTemp = 8>>
	<<set $visitL7 = 1>>
<<elseif $secondVisitL7 == 0>>
	<<set $secondVisitL7 = 1>>
	<<set $layerTemp = 18>>
<<else>>
	<<set $layerTemp = random(0,20)>>
<</if>>
<<if $layerTemp >= (18 - $hiredCompanions.length) && $layerTemp < 19 && $hiredCompanions.length > 0>>
<<include "Companion Layer Interaction">>
<<elseif $layerTemp >= 19>>
<<include "Curse Descriptions">><br><br>
<</if>>
<<if $dubloons < 51>>
	@@.alert2; You only have $dubloons dubloons left. Make sure you keep enough money on you to pay the tax drones! @@<br><br>
<</if>>
<</nobr>>


<<nobr>>
<<if $forageWater == 0>>
	<<print "You are not able to forage for daily water on this layer, due to the nature of the water source.">><br>
	<</if>>
<<if $forageFood == 0>>
	<<print "You are not able to forage for daily food on this layer, due to the nature of the food source.">><br>
	<</if>>
<<if !isPlaying("layer7")>>
	<<masteraudio stop>><<audio "layer7" volume 0.2 play loop>>
<</if>>
<br>
What do you want to do while you're here?<br><br>
[[Use Items and Relics]]<br>
<<if $hiredCompanions.length > 0>>
[[Interact with your party|Party overview]] <<CheckParty>><br>
<</if>>
<</nobr>>
[[Learn about the threats on this layer|Layer7 Threats]]
[[Check for food and water you can forage for|Layer7 Forage]]
[[Search for Relics|Layer7 Relics]]
[[Take on Curses to purge your corruption|Layer7 Curses]]
[[Look for any wonders you can take advantage of|Layer7 Wonders]]
[[View the Layer 7 habitation option|Layer7 Habitation]]

[[Look up towards the surface|Layer7 Ascend 1]]
[[Look down at the next layer|Layer7 Exit1]]
<<else>>
A an enormous rumbling catches your attention as you walk through the seventh layer. A brief glance around reveals the source, an enormous, building-sized machine that is now rapidly approaching you. You consider running, but the Security Robot is moving at an incredible speed, leaving you no chance to get away.

"ACCEPT REHABILITATION" a synthetic voice calls out, with the huge robot nearly upon you.

And suddenly, it's here, reaching down to grab you with shining metallic arms and pull you into its shell.

[[Get rehabilitated|Layer7 Threat2 Main]]
<</if>>


:: Layer7 Cherry [layer7]
[img[setup.ImagePath+'Surface/cherry.png']]

How would you like to use Cherry's chaotic luck ability?

[[Get 2 random Relics for half cost|Layer7 Cherry Relic]]
[[Get 2 random Curses for +50% corruption|Layer7 Cherry Curse]]
[[Get 1 Relic and 1 Curse|Layer7 Cherry Mix]]


:: Layer7 Threats [image layer7]
[img[setup.ImagePath+'Clipped-Fin/Abyss Diver Page 8-threats.png']]

[[Return to exploring the seventh layer|Layer7 Hub]]


:: Layer7 Forage [image layer7]
[img[setup.ImagePath+'Clipped-Fin/Abyss Diver Page 8-foraging.png']]

Which job would you like to work on today? Hopefully you can make a decent living in the hard labor available in this empty, automated city.

It is reccomended that you get creative with your Relics and think of more efficient ways to do these tasks than the basic methods provided. If you have a suitable Relic for the task, you might find a specific option to use it, or you can estimate how effective a certain combination of Relics would be to do the job.

[[Work on Heavy Lifting]]
[[Work on Land Excavation]]
[[Work on City Painting]]
[[Work on Energy Generator]]
[[Work on Robo-prostitution]]

[[Continue exploring the seventh layer|Layer7 Hub]]


:: Layer7 Relics [layer7 cards nobr]
<p><<checkTime>></p>
<<if $dubloons < 0>>

<p>[img[setup.ImagePath+'Threats/taxdrone.png']]</p>

<p>A quiet humming sound descends upon you as you see the Taxdrone floating towards you from over a nearby building. You reach into your pack to get your typical dubloon payment, but then you realize something is wrong, you can't find any dubloons! Perhaps you didn't keep track of them properly? But it's too late to get any now, the taxes are already due.</p>

<p>The Taxdrone patiently requests that you submit your taxes as it displays a slot for you to deposit the dubloons into, but soon it realizes you will not be paying and the typically soft blue lights on the drone change to glaring red and an alarm sounds.</p>

<p>Within a moment you are restrained by nets made of light and you feel a prick on your neck. You notice the drone has stabbed you with a syringe, but at this point it's too late to resist and your consciousness begins to fade, leaving you to succumb to your fate.</p>

<p>You are now forced to become a permanent resident of Layer 7.</p>

<p>[[Awaken to your new life|Layer7 Tax End]]</p>

<<elseif $timeL7T2 < 6>>

<p>[[Continue exploring the seventh layer|Layer7 Hub]]</p>

<<RelicGrid `["Daedalus Mechanism", "Blind Divine", "Lambent Specter", "Phoenix Obol", "Granted Granite", "Joyous Sunder", "Azure Aozora", "Glare Vantage", "Final Stage", "Solace Lace", "Red Thread Flourish", "Triage Rain"]`>>

<p>[[Continue exploring the seventh layer|Layer7 Hub]]</p>

<<else>>

<p>A an enormous rumbling catches your attention as you walk through the seventh layer. A brief glance around reveals the source, an enormous, building-sized machine that is now rapidly approaching you. You consider running, but the Security Robot is moving at an incredible speed, leaving you no chance to get away.</p>

<p>"ACCEPT REHABILITATION" a synthetic voice calls out, with the huge robot nearly upon you.</p>

<p>And suddenly, it's here, reaching down to grab you with shining metallic arms and pull you into its shell.</p>

<p>[[Get rehabilitated|Layer7 Threat2 Main]]</p>

<</if>>


:: Layer7 Curses [image layer7]
[img[setup.ImagePath+'Clipped-Fin/Abyss Diver Page 8-curses.png']]<<GenderCorrected>>

<<nobr>>
<<set _table =  "<table>" >>
<<if $playerCurses.some(e => e.name === "Libido Reinforcement E")  || $StoredCurse.name == "Libido Reinforcement E" >>
<<set _table += "<tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr>">>
<<else>>
	<<set _table += "<tr><td>[[Take on Libido Reinforcement E]]</td>">>
	<<if $ownedRelics.some(e => e.name === "Managed Misfortune")>>
		<<if $ManagedMisfortuneActive>>
			<<set _table += "<td>You can not store a new Curse while you are still affected by the Curse in Managed Misfortune.</td></tr>">>
		<<else>>
			<<set _table += "<td>or [[Store this Curse in Managed Misfortune|Layer7 Curses][$StoredCurse = $curse85]]</td></tr>">>
		<</if>>
	<<else>>
		<<set _table += "</tr>">>
	<</if>>
<</if>>
<<if $playerCurses.some(e => e.name === "Gender Reversal E") || $StoredCurse.name == "Gender Reversal E">>
<<set _table += "<tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr>">>
<<else>>
	<<set _table += "<tr><td>[[Take on Gender Reversal E]]</td>">>
	<<if $ownedRelics.some(e => e.name === "Managed Misfortune")>>
		<<if $ManagedMisfortuneActive>>
			<<set _table += "<td>You can not store a new Curse while you are still affected by the Curse in Managed Misfortune.</td></tr>">>
		<<else>>
			<<set _table += "<td>or [[Store this Curse in Managed Misfortune|Layer7 Curses][$StoredCurse = $curse86]]</td></tr>">>
		<</if>>
	<<else>>
		<<set _table += "</tr>">>
	<</if>>
<</if>>
<<if $playerCurses.some(e => e.name === "Asset Robustness E") || $playerCurses.some(e => e.name === "Shrunken Assets") || $StoredCurse.name == "Asset Robustness E" || $StoredCurse.name == "Shrunken Assets">>
<<set _table += "<tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr>">>
<<else>>
	<<set _table += "<tr><td>[[Take on Asset Robustness E]]</td>">>
	<<if $ownedRelics.some(e => e.name === "Managed Misfortune")>>
		<<if $ManagedMisfortuneActive>>
			<<set _table += "<td>You can not store a new Curse while you are still affected by the Curse in Managed Misfortune.</td></tr>">>
		<<else>>
			<<set _table += "<td>or [[Store this Curse in Managed Misfortune|Layer7 Curses][$StoredCurse = $curse87]]</td></tr>">>
		<</if>>
	<<else>>
		<<set _table += "</tr>">>
	<</if>>
<</if>>
<<if $playerCurses.some(e => e.name === "Urine Reamplification A") || $StoredCurse.name == "Urine Reamplification A" >>
<<set _table += "<tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr>">>
<<else>>
	<<set _table += "<tr><td>[[Take on Urine Reamplification A]]</td>">>
	<<if $ownedRelics.some(e => e.name === "Managed Misfortune")>>
		<<if $ManagedMisfortuneActive>>
			<<set _table += "<td>You can not store a new Curse while you are still affected by the Curse in Managed Misfortune.</td></tr>">>
		<<else>>
			<<set _table += "<td>or [[Store this Curse in Managed Misfortune|Layer7 Curses][$StoredCurse = $curse88]]</td></tr>">>
		<</if>>
	<<else>>
		<<set _table += "</tr>">>
	<</if>>
<</if>>
<<if $playerCurses.some(e => e.name === "Barter System") || $StoredCurse.name == "Barter System" >>
<<set _table += "<tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr>">>
<<else>>
	<<set _table += "<tr><td>[[Take on Barter System]]</td>">>
	<<if $ownedRelics.some(e => e.name === "Managed Misfortune")>>
		<<if $ManagedMisfortuneActive>>
			<<set _table += "<td>You can not store a new Curse while you are still affected by the Curse in Managed Misfortune.</td></tr>">>
		<<else>>
			<<set _table += "<td>or [[Store this Curse in Managed Misfortune|Layer7 Curses][$StoredCurse = $curse89]]</td></tr>">>
		<</if>>
	<<else>>
		<<set _table += "</tr>">>
	<</if>>
<</if>>
<<if $playerCurses.some(e => e.name === "Shared Space") || $StoredCurse.name == "Shared Space">>
<<set _table += "<tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr>">>
<<else>>
	<<set _table += "<tr><td>[[Take on Shared Space]]</td>">>
	<<if $ownedRelics.some(e => e.name === "Managed Misfortune")>>
		<<if $ManagedMisfortuneActive>>
			<<set _table += "<td>You can not store a new Curse while you are still affected by the Curse in Managed Misfortune.</td></tr>">>
		<<else>>
			<<set _table += "<td>or [[Store this Curse in Managed Misfortune|Layer7 Curses][$StoredCurse = $curse90]]</td></tr>">>
		<</if>>
	<<else>>
		<<set _table += "</tr>">>
	<</if>>
<</if>>
<<if $playerCurses.some(e => e.name === "Weakling") || $StoredCurse.name == "Weakling">>
<<set _table += "<tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr>">>
<<else>>
	<<set _table += "<tr><td>[[Take on Weakling]]</td>">>
	<<if $ownedRelics.some(e => e.name === "Managed Misfortune")>>
		<<if $ManagedMisfortuneActive>>
			<<set _table += "<td>You can not store a new Curse while you are still affected by the Curse in Managed Misfortune.</td></tr>">>
		<<else>>
			<<set _table += "<td>or [[Store this Curse in Managed Misfortune|Layer7 Curses][$StoredCurse = $curse91]]</td></tr>">>
		<</if>>
	<<else>>
		<<set _table += "</tr>">>
	<</if>>
<</if>>
<<if setup.takenCurseCount("Random Orgasms") >= 5>>
	<<set _table += "<tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr>">>
<<else>>
	<<set _table += "<tr><td>[[Take on Random Orgasms]]</td>">>
	<<if $ownedRelics.some(e => e.name === "Managed Misfortune")>>
		<<if $ManagedMisfortuneActive>>
			<<set _table += "<td>You can not store a new Curse while you are still affected by the Curse in Managed Misfortune.</td></tr>">>
		<<else>>
			<<set _table += "<td>or [[Store this Curse in Managed Misfortune|Layer7 Curses][$StoredCurse = $curse92]]</td></tr>">>
		<</if>>
	<<else>>
		<<set _table += "</tr>">>
	<</if>>
<</if>>
<<if $playerCurses.some(e => e.name === "Beastly") || $StoredCurse.name == "Beastly" >>
<<set _table += "<tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr>">>
<<else>>
	<<set _table += "<tr><td>[[Take on Beastly]]</td>">>
	<<if $ownedRelics.some(e => e.name === "Managed Misfortune")>>
		<<if $ManagedMisfortuneActive>>
			<<set _table += "<td>You can not store a new Curse while you are still affected by the Curse in Managed Misfortune.</td></tr>">>
		<<else>>
			<<set _table += "<td>or [[Store this Curse in Managed Misfortune|Layer7 Curses][$StoredCurse = $curse93]]</td></tr>">>
		<</if>>
	<<else>>
		<<set _table += "</tr>">>
	<</if>>
<</if>>
<<if $playerCurses.some(e => e.name === "Creature of the Night") || $StoredCurse.name == "Creature of the Night" >>
	<<set _table += "<tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr>">>
	<<else>>
	<<set _table += "<tr><td>[[Take on Creature of the Night]]</td>">>
	<<if $ownedRelics.some(e => e.name === "Managed Misfortune")>>
		<<if $ManagedMisfortuneActive>>
			<<set _table += "<td>You can not store a new Curse while you are still affected by the Curse in Managed Misfortune.</td></tr>">>
		<<else>>
			<<set _table += "<td>or [[Store this Curse in Managed Misfortune|Layer7 Curses][$StoredCurse = $curse94]]</td></tr>">>
		<</if>>
	<<else>>
		<<set _table += "</tr>">>
	<</if>>
<</if>>
<<if setup.takenCurseCount("Colossal-able") > 0 || setup.takenCurseCount("Minish-ish") > 0 >>
<<set _table += "<tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr>">>
<<else>>
	<<set _table += "<tr><td>[[Take on Minish-ish]]</td>">>
	<<if $ownedRelics.some(e => e.name === "Managed Misfortune")>>
		<<if $ManagedMisfortuneActive>>
			<<set _table += "<td>You can not store a new Curse while you are still affected by the Curse in Managed Misfortune.</td></tr>">>
		<<else>>
			<<set _table += "<td>or [[Store this Curse in Managed Misfortune|Layer7 Curses][$StoredCurse = $curse95]]</td></tr>">>
		<</if>>
	<<else>>
		<<set _table += "</tr>">>
	<</if>>
<</if>>
<<if setup.takenCurseCount("Colossal-able") > 0 || setup.takenCurseCount("Minish-ish") > 0 >>
<<set _table += "<tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr>">>
<<else>>
	<<set _table += "<tr><td>[[Take on Colossal-able]]</td>">>
	<<if $ownedRelics.some(e => e.name === "Managed Misfortune")>>
		<<if $ManagedMisfortuneActive>>
			<<set _table += "<td>You can not store a new Curse while you are still affected by the Curse in Managed Misfortune.</td></tr>">>
		<<else>>
			<<set _table += "<td>or [[Store this Curse in Managed Misfortune|Layer7 Curses][$StoredCurse = $curse96]]</td></tr>">>
		<</if>>
	<<else>>
		<<set _table += "</tr>">>
	<</if>>
<</if>>
<<set _table +=  "</table>" >>
<</nobr>>
<<print _table>>

[[Allow the Abyss to bestow a random Curse upon you|Layer7 Curses Random]]

<<if $escBalDepl==0>>
	[[Return to exploring layer 7|Layer7 Hub]]
<<else>>
	[[Return to your balloon|Escape Balloon L7]]
<</if>>


:: Layer7 Wonders [image layer7]
[img[setup.ImagePath+'Clipped-Fin/Abyss Diver Page 8-wonders2.png']]

Do you want to visit the Clockwork Forge to swap Relic abilities?
[[Approach the Forge|Layer7 Forge1]]

Do you want to check out the Vend-o-matic 6900 to purchase new items?
[[Approach the Vend-o-matic|Layer7 Vend]]

Do you want to visit the Recycling Centers to recycle some of your Relics?
[[Approach the Recycling Centers|Layer7 Recycle]]

<<back>>


:: Layer7 Habitation [image layer7]
[img[setup.ImagePath+'Clipped-Fin/Abyss Diver Page 8-habitation.png']]

<<return>>

<<nobr>>
	<<if $corruption >= 0>>
	[[Choose to stay on the seventh layer|Habitation Ending]]
	<<else>>
	You must have a corruption value of 0 or greater to choose a habitation option.
<</if>>
<</nobr>>


:: Layer7 Ascend 1 [layer7]
This layer seems to be a bit smaller than the last few, and its paved roads are much easier to traverse. Ascending back into hell - that is, layer 6 - will take 7 days of walking, and cost 80 corruption.

<<if $DaedalusEquip==true >>\
	<<if $DaedalusFly==false>>\
		You are currently commited to simply walking to the next layer
		[[Flap your wings and prepare to fly to the next layer|Layer7 Ascend 1][$DaedalusFly=true]]
	<<else>>\
		You are about to fly to the next layer
		<<set $companionsDepartT = $time>>
		<<set $companionsDepartL = $currentLayer>>
		[[Maybe it's better to walk to the next layer|Layer7 Ascend 1][$DaedalusFly=false]]
	<</if>>\
<</if>>\
[[Continue your ascent|Layer7 Ascend2]]
[[Turn back and continue your business on the seventh layer|Layer7 Hub]]

:: Layer7 Exit1 [layer7]
This is the last area where balloons of any kind can function.

If you head down, you will need to come back up on foot again before the shop's messenger, escape, or commerce balloons can ascend through the layers again. Anything could be down there, so it's probably best to stock up on all kinds of supplies (assume it may take weeks or months to get back) and take care of any unfinished business before proceeding further - you have a feeling that what lies beyond this layer is a level of danger that will make everything up until now seem laugably easy. This is probably the last reprieve you'll have on your journey unless you head back up. Past this point, the Abyss probably stops playing fair and reasonable.

As you head towards the bottom of the city to descend to the next layer, you notice something doesn't feel quite right. There's no exact way to describe it other than "wrong", but it feels like reality itself is warning you about the consequences of going deeper. It may be a good idea to heed that warning, taking this chance to return to the upper layers or the surface to live your new life, rather than dying, stranded in the deepest reaches of the Abyss.

If you're not dissuaded and choose to continue onward, it will take you 8 days to reach this layer's bottom.

[[Turn back and continue your business on the seventh layer|Layer7 Hub]]
[[Continue your descent to the eighth layer|Layer7 Exit2]]


:: Layer7 Threat2 Main [layer7]
<<nobr>>
<<set $timeL7T2 -= 6>>
<<set $tempTime = 1>>
<<include "GeneralTimeStats">>
<</nobr>>
[img[setup.ImagePath+'Threats/securityrobot.png']]

<<if $playerCurses.some(e => e.name === "Hypno Happytime") && $layer7Hypno < 3>><<set $layer7Hypno += 1>>
	After you are pulled into the giant security robot, you are placed in a cell and bombarded with propaganda recordings about life in the city and your place in it. It seems to be nonsense, why would you want to serve organics? You are an organic!

	Of course you can't tone it all out, but it's pretty easy to keep your eyes on what matters and you patiently wait until the time is up and you are released.

	[[Return to exploring the city|Layer7 Hub]]

<<elseif $playerCurses.some(e => e.name === "Hypno Happytime") && $layer7Hypno < 5>><<set $layer7Hypno += 1>>
	Once again, you are pulled into the security robot to hear the familiar tales of how to be a productive part of society.

	For some reason, you find yourself paying a but more attention to the videos and voices, and you realize that they're not actually as ridiculous as you first thought.

	Sure, you're free right now, but with subservience can come great pleasure, and what greater pursuit in life is there than pleasure? Your pleasure centers could be continually stimulated by following orders and following what is demanded of you.

	Fine, you're an organic being, but the miraculous technology of the city could change that, they could change you so that you fit neatly into the mechanisms of society here. No need to let your messy fleshy bits get in the way of a better life for you and everyone else.

	Yeah, you do have goals of things you want to do, but why are your goals more important than the goals of an entire city? Especially when they are as grand as the City of Agartha preparing for the future awakening of its organic population!

	When the robot releases you, you are tempted to go back and take up residence here, but shake off the feeling and continue your journey.

	[[Return to exploring the city|Layer7 Hub]]

<<elseif $playerCurses.some(e => e.name === "Hypno Happytime") && $layer7Hypno == 5>>
	Once again, you are pulled into the security robot to hear the familiar tales of how to be a productive part of society. And yeah, you do wish you were a better member of society, don't you?

	The arguments they are making actually make perfect sense, they seem to precisely match your own thoughts actually. As if they were molded to you (or the other way around.)

	With subservience can come great pleasure, and what greater pursuit in life is there than pleasure? Your pleasure centers could be continually stimulated by following orders and following what is demanded of you.

	The miraculous technology of the city could change that, they could change your organic body so that you fit neatly into the mechanisms of society here. No need to let your messy fleshy bits get in the way of a better life for you and everyone else.

	Why are your goals more important than the goals of an entire city? Especially when they are as grand as the City of Agartha preparing for the future awakening of its organic population!

	When the robot releases you, you are free to go, but you do not use that freedom.

	Now is your chance, you've found a place where you belong.

	It's time to stay in your new home.

	You tell the robot that you are ready to take your place as a gear in the mechanism of society and almost immediately a syringe comes out of the wall and pokes your neck. You smile as your consciousness fades.

	[[Awaken to your new life|Layer7 Tax End]]

<<else>>

	After you are pulled into the giant security robot, you are placed in a cell and bombarded with propaganda recordings about life in the city and your place in it. It seems to be nonsense, why would you want to serve organics? You are an organic!

	The biggest threat here is your boredom, honestly. While you try to fall asleep the robot makes an effort to keep you awake, in a kind of minor psychological torture through annoyance.

	Eventually you are released though, with no harm done, and ready to continue your journey in the seventh layer.

	[[Return to exploring the city|Layer7 Hub]]

<</if>>


:: Pick up the Daedalus Mechanism [layer7]
<<nobr>>
<<set $ownedRelics.push($relic73)>>
<<set $corruption -= ($relic73.corr - $corRed + (5 * Math.trunc($hexflame / 10)))>>
<<set $tempTime = $relic73.time-$SibylBuff>>
<<include "GeneralTimeSetup">><<include "GeneralTimeStats">>

<</nobr>>

You have successfully taken the $relic73.name Relic. Hopefully you can make good use of it and make it worth that corruption cost.

[[Continue searching for the Relics of layer 7|Layer7 Relics]]
[[Continue exploring the seventh layer|Layer7 Hub]]


:: Pick up the Blind Divine [layer7]
<<nobr>>
<<if $slingshot == 0>><<set $items[20].count -= 4>><</if>>
<<set $ownedRelics.push($relic74)>>
<<set $corruption -= ($relic74.corr - $corRed + (5 * Math.trunc($hexflame / 10)))>>
<<set $tempTime = $relic74.time-$SibylBuff>>
<<include "GeneralTimeSetup">><<include "GeneralTimeStats">>

<</nobr>>

You have successfully taken the $relic74.name Relic. Hopefully you can make good use of it and make it worth that corruption cost.

This Relic grants you the ability to see in any dark place, removing the need for light in most cases as long as you posess it.

[[Continue searching for the Relics of layer 7|Layer7 Relics]]
[[Continue exploring the seventh layer|Layer7 Hub]]


:: Pick up the Lambent Specter [layer7]
<<nobr>>
<<set $ownedRelics.push($relic75)>>
<<set $corruption -= ($relic75.corr - $corRed + (5 * Math.trunc($hexflame / 10)))>>
<<set $tempTime = $relic75.time-$SibylBuff>>
<<include "GeneralTimeSetup">><<include "GeneralTimeStats">>

<</nobr>>

You have successfully taken the $relic75.name Relic. Hopefully you can make good use of it and make it worth that corruption cost.

[[Continue searching for the Relics of layer 7|Layer7 Relics]]
[[Continue exploring the seventh layer|Layer7 Hub]]


:: Pick up the Phoenix Obol [layer7]
<<nobr>>
<<set $ownedRelics.push($relic76)>>
<<set $corruption -= ($relic76.corr - $corRed + (5 * Math.trunc($hexflame / 10)))>>
<<set $tempTime = $relic76.time-$SibylBuff>>
<<include "GeneralTimeSetup">><<include "GeneralTimeStats">>

<</nobr>>

You have successfully taken the $relic76.name Relic. Hopefully you can make good use of it and make it worth that corruption cost.

[[Continue searching for the Relics of layer 7|Layer7 Relics]]
[[Continue exploring the seventh layer|Layer7 Hub]]


:: Pick up the Granted Granite [layer7]
<<nobr>>
<<set $ownedRelics.push($relic77)>>
<<set $corruption -= ($relic77.corr - $corRed + (5 * Math.trunc($hexflame / 10)))>>
<<set $tempTime = $relic77.time-$SibylBuff>>
<<include "GeneralTimeSetup">><<include "GeneralTimeStats">>

<</nobr>>

You have successfully taken the $relic77.name Relic. Hopefully you can make good use of it and make it worth that corruption cost.

[[Continue searching for the Relics of layer 7|Layer7 Relics]]
[[Continue exploring the seventh layer|Layer7 Hub]]


:: Pick up the Joyous Sunder [layer7]
<<nobr>>
<<set $ownedRelics.push($relic78)>>
<<set $corruption -= ($relic78.corr - $corRed + (5 * Math.trunc($hexflame / 10)))>>
<<set $tempTime = $relic78.time-$SibylBuff>>
<<include "GeneralTimeSetup">><<include "GeneralTimeStats">>

<</nobr>>

You have successfully taken the $relic78.name Relic. Hopefully you can make good use of it and make it worth that corruption cost.

[[Continue searching for the Relics of layer 7|Layer7 Relics]]
[[Continue exploring the seventh layer|Layer7 Hub]]


:: Pick up the Azure Aozora [layer7]
<<nobr>>
<<set $ownedRelics.push($relic79)>>
<<set $corruption -= ($relic79.corr - $corRed + (5 * Math.trunc($hexflame / 10)))>>
<<set $tempTime = $relic79.time-$SibylBuff>>
<<include "GeneralTimeSetup">><<include "GeneralTimeStats">>

<</nobr>>

You have successfully taken the $relic79.name Relic. Hopefully you can make good use of it and make it worth that corruption cost.

[[Continue searching for the Relics of layer 7|Layer7 Relics]]
[[Continue exploring the seventh layer|Layer7 Hub]]


:: Pick up the Glare Vantage [layer7]
<<nobr>>
<<set $ownedRelics.push($relic80)>>
<<set $corruption -= ($relic80.corr - $corRed + (5 * Math.trunc($hexflame / 10)))>>
<<set $tempTime = $relic80.time-$SibylBuff>>
<<include "GeneralTimeSetup">><<include "GeneralTimeStats">>

<</nobr>>

You have successfully taken the $relic80.name Relic. Hopefully you can make good use of it and make it worth that corruption cost.

If you don't already have a source of light, the Glare Vantage will provide you with one on your journey.

[[Continue searching for the Relics of layer 7|Layer7 Relics]]
[[Continue exploring the seventh layer|Layer7 Hub]]


:: Pick up the Final Stage [layer7]
<<nobr>>
<<set $ownedRelics.push($relic81)>>
<<set $corruption -= ($relic81.corr - $corRed + (5 * Math.trunc($hexflame / 10)))>>
<<set $tempTime = $relic81.time-$SibylBuff>>
<<include "GeneralTimeSetup">><<include "GeneralTimeStats">>

<</nobr>>

You have successfully taken the $relic81.name Relic. Hopefully you can make good use of it and make it worth that corruption cost.

[[Continue searching for the Relics of layer 7|Layer7 Relics]]
[[Continue exploring the seventh layer|Layer7 Hub]]


:: Pick up the Solace Lace [layer7]
<<nobr>>
<<set $ownedRelics.push($relic82)>>
<<set $corruption -= ($relic82.corr - $corRed + (5 * Math.trunc($hexflame / 10)))>>
<<set $tempTime = $relic82.time-$SibylBuff>>
<<include "GeneralTimeSetup">><<include "GeneralTimeStats">>
<<set $heat = 1>>
<<set $cool = 1>>

<</nobr>>

You have successfully taken the $relic82.name Relic. Hopefully you can make good use of it and make it worth that corruption cost.

This Relic provides you with comfort in the cold to reduce travel times by 2 days on layer 4 and comfort in the heat to reduce travel times by 1 day on layers 5 or 6.

[[Continue searching for the Relics of layer 7|Layer7 Relics]]
[[Continue exploring the seventh layer|Layer7 Hub]]


:: Pick up the Red Thread Flourish [layer7]
<<nobr>>
<<set $ownedRelics.push($relic83)>>
<<set $corruption -= ($relic83.corr - $corRed + (5 * Math.trunc($hexflame / 10)))>>
<<set $tempTime = $relic83.time-$SibylBuff>>
<<include "GeneralTimeSetup">><<include "GeneralTimeStats">>

<</nobr>>

You have successfully taken the $relic83.name Relic. Hopefully you can make good use of it and make it worth that corruption cost.

[[Continue searching for the Relics of layer 7|Layer7 Relics]]
[[Continue exploring the seventh layer|Layer7 Hub]]


:: Pick up the Triage Rain [layer7]
<<nobr>>
<<set $ownedRelics.push($relic84)>>
<<set $corruption -= ($relic84.corr - $corRed + (5 * Math.trunc($hexflame / 10)))>>
<<set $tempTime = $relic84.time-$SibylBuff>>
<<include "GeneralTimeSetup">><<include "GeneralTimeStats">>

<</nobr>>

You have successfully taken the $relic84.name Relic. Hopefully you can make good use of it and make it worth that corruption cost.

[[Continue searching for the Relics of layer 7|Layer7 Relics]]
[[Continue exploring the seventh layer|Layer7 Hub]]


:: Layer7Time
<<nobr>>
<<set $tempTime = (Math.max((1+$SizeHandicap)*($tempTime - $timeRed + $status.penalty + (Math.trunc($hexflame / 10))), 0))>>
<<if $status.duration > 0>>
	<<set $status.duration -= 1>>
	<<else>>
	<<set $status.penalty = 0>>
<</if>>
<<set $timeL7 += $tempTime>>
<<if $dubloons < 500>>
	<<set $timeL7T2 += $tempTime>>
<</if>>
<<set $time += $tempTime>>
<<if $dubloons >= 300>>
	<<set $dubloons -= 1>>
	<<elseif $dubloons >= 100>>
	<<set $dubloons -= 2>>
	<<else>>
	<<set $dubloons -= 3>>
<</if>>
<<if $forageFood == 1>>
	<<else>>
	<<set $items[1].count -= $tempTime>>
<</if>>
<<for $i = 0; $i < $tempTime; $i++>>
	<<if $forageWater == 0>>
		<<if $items[3].count > 0>>
			<<set $items[3].count -= 1, 0>>
			<<set $items[2].count += 1, 0>>
		<<else>>
			<<set $items[0].count -= 1>>
		<</if>>
	<</if>>
	<<if $hexflame > 9>>
		<<set $hexflame -= 1>>
	<</if>>
<</for>>
<</nobr>>


:: Layer7 Forge1 [layer7]
<<nobr>>
<<set $temp1 = -1>>
<<set $temp2 = -1>>\
<</nobr>>
[img[setup.ImagePath+'Wonders/gearshifter.png']]

An enormous mechanism consisting of innumerable sets of interlocking gears appears before you. Strange symbols you don't understand cover the surface, but it seems apparent to you that there are 2 slots where you can place your Relics to make use of the Forge's effects.

If you choose to place 2 Relics in the Clockwork Forge, along with 4 dubloons, you can swap their abilities while retaining their prior shape, for example allowing you to put the Breathless Exhale and Sunbeam Relics in, to get a fire-enshrouded fan and a wind-controlling sword out.


[[Use the Forge to swap the abilities of 2 Relics|Layer7 Forge2]]
<<back>>


:: Layer7 Vend [layer7 cards nobr]

<p><<CarryAdjust>></p>

<p>Here are all of the items available for you to spend your $dubloons dubloons on in the Vend-o-matic 6900.</p>

<p>Your team is currently carrying <<print setup.calcCarriedWeight().toFixed(1)>> kg and your team has a total carrying capacity of <<print Math.round($totalCarry)>> kg.</p>
<div class="cards-grid">
<<for _item range [
	setup.itemVendFood, setup.itemVendWater, setup.itemVendFlask,
	$item25, $item26, setup.itemVendMedkit
]>>
<div>
[img[setup.ImagePath + _item.image]]
<h2><<print _item.name == "Empty Flask" ? "Flask" : _item.name>></h2>
<p>
<<button `"Buy for " + _item.cost + (_item.cost == 1 ? " dubloon" : " dubloons")` `"Layer7 " + _item.name`>><</button>>
</p>
<p>
<<if _item.desc>><<print _item.desc>><<else>><<include `_item.name + " Description"`>><</if>>
<<if _item.weight>><br><br><<print _item.weight>> kg<</if>>
<<if _item.name == "Empty Flask">> empty, $item4.weight kg full<</if>>
</p>
</div>
<</for>>
</div>

<p>You can also purchase refills of water from the vending machine here, up to the number of empty flasks you own. If you would like to purchase water for a flask, please enter the number of days of water you would like to purchase on the vending machine touchscreen:</p>
<<textbox "$temp" "0">>
<p>[[Purchase flask refills|Layer7 Flasks]]</p>

<p>[[Finish Shopping|Layer7 Hub]]</p>

:: Layer7 Flasks
<<nobr>>
<<set $temp = parseInt($temp)>>
<<set $dubloons -= $temp>>
<<for $i = 0; $i < $temp; $i++>>
	<<if $items[2].count > 0>>
		<<set $items[3].count += 1>>
		<<set $items[2].count -= 1>>
		<<set $waterL7 += 1>>
		<<set $flaskMatrix[0]+=1>>
	<<else>>
		<<break>>
	<</if>>
<</for>>
<</nobr>>

You have refilled $temp flasks with the cool, refreshing, and surprisingly pure water from the vending machines on this layer.

[[Continue exploring the seventh layer|Layer7 Hub]]

:: Layer7 Recycle [layer7]
Here you can permanently recycle any of your collected Relics for a nice haul of dubloons. You can use this to fund further expeditions, pay off your debt, or just get a nice payday at the end of your expedition.

Choose the Relic you would like to sell:
<<nobr>>
<<for $i = 0; $i < $ownedRelics.length; $i++>>
	<<capture $i>>
		<<if $ownedRelics[$i].name=="Creepy Doll" && $creepydoll.affec > 5>>
			You can't seem to part ways with the Creepy Doll<br>
		<<elseif $ownedRelics[$i].name=="Chain of Lorelei">>
			<<print $ownedRelics[$i].name>><<print " for ">><<print (Math.max($ownedRelics[$i].value - 15 + ($sellAdd / 2)))>><<print " dubloons ">><<print "[[Sell|Layer7 Recycle][$colwear=0,$dubloons += (Math.max($ownedRelics[$i].value - 15 + ($sellAdd / 2))), $soldRelics.push($ownedRelics[$i]), $ownedRelics.deleteAt($i)]]">><br>
		<<elseif $ownedRelics[$i].name=="Heart-stealing Stole">>
			<<print $ownedRelics[$i].name>><<print " for ">><<print (Math.max($ownedRelics[$i].value - 15 + ($sellAdd / 2)))>><<print " dubloons ">><<print "[[Sell|Layer7 Recycle][$hsswear=0,$dubloons += (Math.max($ownedRelics[$i].value - 15 + ($sellAdd / 2))), $soldRelics.push($ownedRelics[$i]), $ownedRelics.deleteAt($i)]]">><br>
		<<elseif $ownedRelics[$i].name=="Sibyl Blend">>
			<<print $ownedRelics[$i].name>><<print " for ">><<print (Math.max($ownedRelics[$i].value - 15 + ($sellAdd / 2)))>><<print " dubloons ">><<print "[[Sell|Layer7 Recycle][$SibylBuff=0,$dubloons += (Math.max($ownedRelics[$i].value - 15 + ($sellAdd / 2))), $soldRelics.push($ownedRelics[$i]), $ownedRelics.deleteAt($i)]]">><br>
		<<elseif $ownedRelics[$i].name=="World Stone" && $LilyPromise>>
			<<print $ownedRelics[$i].name>><<print " for ">><<print (Math.max($ownedRelics[$i].value - 15 + ($sellAdd / 2)))>><<print " dubloons ">><<print "[[Sell|Layer7 Recycle][$dubloons += (Math.max($ownedRelics[$i].value - 15 + ($sellAdd / 2))), $soldRelics.push($ownedRelics[$i]), $ownedRelics.deleteAt($i), $companionLily.affec-=(5-$hsswear)]]">> <br>You promised Lily she could use the World Stone at the end of your journey, recycling it now will surely disappoint her quite a lot. <br>
		<<elseif $ownedRelics[$i].name=="Everhevea">>
			<<print $ownedRelics[$i].name>><<print " for ">><<print (Math.max($ownedRelics[$i].value - 15 + ($sellAdd / 2)))>><<print " dubloons ">><<print "[[Sell|Layer7 Recycle][$dubloons += (Math.max($ownedRelics[$i].value - 15 + ($sellAdd / 2))), $soldRelics.push($ownedRelics[$i]), $ownedRelics.deleteAt($i), $items[2].count-=2]]">>
		<<elseif $ownedRelics[$i].name=="Daedalus Mechanism">>
			<<print $ownedRelics[$i].name>><<print " for ">><<print (Math.max($ownedRelics[$i].value - 15 + ($sellAdd / 2)))>><<print " dubloons ">><<print "[[Sell|Layer7 Recycle][$DaedalusEquip = false, $DaedalusFly = false, $dubloons += (Math.max($ownedRelics[$i].value - 15 + ($sellAdd / 2))), $soldRelics.push($ownedRelics[$i]), $ownedRelics.deleteAt($i)]]">><br>
		<<elseif $ownedRelics[$i].name=="Blind Divine">>
			<<print $ownedRelics[$i].name>><<print " for ">><<print (Math.max($ownedRelics[$i].value - 15 + ($sellAdd / 2)))>><<print " dubloons ">><<print "[[Sell|Layer7 Recycle][$BDwear = false, $dubloons += (Math.max($ownedRelics[$i].value - 15 + ($sellAdd / 2))), $soldRelics.push($ownedRelics[$i]), $ownedRelics.deleteAt($i)]]">><br>
		<<elseif $ownedRelics[$i].name=="Heavy is the Head">>
			<<print $ownedRelics[$i].name>><<print " for ">><<print (Math.max($ownedRelics[$i].value - 15 + ($sellAdd / 2)))>><<print " dubloons ">><<print "[[Sell|Layer7 Recycle][$HeavyHeadwear= false, $dubloons += (Math.max($ownedRelics[$i].value - 15 + ($sellAdd / 2))), $soldRelics.push($ownedRelics[$i]), $ownedRelics.deleteAt($i)]]">><br>
		<<elseif $ownedRelics[$i].name=="Moonwatcher" & $BionicEye >>
			<<print $ownedRelics[$i].name>> You can't sell Relics that have become part of your body.<br>
		<<elseif $ownedRelics[$i].name=="Glory's Grasp" & $BionicArm >>
			<<print $ownedRelics[$i].name>> You can't sell Relics that have become part of your body.<br>		
		<<else>>
			<<print $ownedRelics[$i].name>><<print " for ">><<print (Math.max($ownedRelics[$i].value - 15 + ($sellAdd / 2)))>><<print " dubloons ">><<print "[[Sell|Layer7 Recycle][$dubloons += (Math.max($ownedRelics[$i].value - 15 + ($sellAdd / 2))), $soldRelics.push($ownedRelics[$i]), $ownedRelics.deleteAt($i)]]">><br>
		<</if>>
	<</capture>>
<</for>>
<</nobr>>

[[Continue your business on the seventh layer|Layer7 Hub]]


:: Layer7 Water [layer7 item]
[img[setup.ImagePath + setup.itemVendWater.image]]

How much water would you like to buy?

<<textbox "$temp" "">>

[[Confirm|Layer7 Vend][$items[0].count += parseInt($temp), $dubloons -= (parseInt($temp)*2)]]
<<back>>


:: Layer7 Food Rations [layer7 item]
[img[setup.ImagePath + setup.itemVendFood.image]]

How many days of food rations would you like to buy?

<<textbox "$temp" "">>

[[Confirm|Layer7 Vend][$items[1].count += parseInt($temp), $dubloons -= (parseInt($temp)*3)]]
<<back>>


:: Layer7 Flask [layer7 item]
[img[setup.ImagePath + setup.itemVendFlask.image]]

How many water flasks would you like to buy?

<<textbox "$temp" "">>

[[Buy filled flasks|Layer7 Vend][$items[3].count += parseInt($temp), $dubloons -= (parseInt($temp)*6), $flaskMatrix[0]+= parseInt($temp)]]

Or alternativly you can use the tap to fill empty flasks you have for 1 dubloon each.

[[Pay to fill all empty flasks|Layer7 Vend][$items[3].count += $items[2].count, $dubloons -= $items[2].count, $flaskMatrix[0]+= $items[2].count, $items[2].count=0]]

<<back>>


:: Layer7 Medkit [layer7 item]
[img[setup.ImagePath + setup.itemVendMedkit.image]]

How many medkits would you like to buy?

Note: These are currently not lighter than the Outset Town medkits!

<<textbox "$temp" "">>

[[Confirm|Layer7 Vend][$items[4].count += parseInt($temp), $dubloons -= (parseInt($temp)*12)]]
<<back>>


:: Layer7 Energy Rations [layer7 item]
[img[setup.ImagePath+$items[24].image]]

How many days of energy rations would you like to buy?

<<textbox "$temp" "">>

[[Confirm|Layer7 Vend][$items[24].count += parseInt($temp), $dubloons -= (parseInt($temp)*11)]]
<<back>>


:: Layer7 Ward Water [layer7 item]
[img[setup.ImagePath+$items[25].image]]

How many days worth of Ward Water would you like to buy?

Note: By default you will drink 1 Ward Water per day instead of foraging for water or drinking bottled water as long as you have at least 1 jinxed flame counter, regardless of your foraging settings. You can change your behavior in the Use Items and Relics menu.

<<textbox "$temp" "">>

[[Confirm|Layer7 Vend][$items[25].count += parseInt($temp), $dubloons -= (parseInt($temp)*4), $wardWaterDrink = 2]]
<<back>>


:: Work on Heavy Lifting [layer7]
[img[setup.ImagePath+'Foraging/heavylifting.png']]

You'll be moving large, heavy metal loads (ostensibly, construction materials) around long distances. Each load weighs arbout 60kg, and you'll be transporting them around 2km on average. You get a small wheeled cart to assist, but stacking more than two on top of each other would be very precarious (not to mention extremely heavy and difficult to push.) You get 1 dubloon for each block you move.

You have obtained $heavyLiftDubloons dubloons out of 80 dubloons max for this job.

An average human working a full day at this task can make 5 dubloons per day doing this job.<<if $playerCurses.some(e => e.name === "Weakling") || $playerCurses.some(e => e.name === "Minish-ish") && !$playerCurses.some(e => e.name === "Colossal-able")>> However, due to your weak body, you cannot move any loads without assistance. You'll need to either assign a companion to work this job alone or use a Relic to make any progress.<</if>><<if $playerCurses.some(e => e.name === "Colossal-able")>> However, due to your enormous size, you can move many loads in your hands with ease. You can move up to 40 loads per day by grasping the loads in your hands, though you will need to take slightly longer paths to get to the destination.<</if>><<if $hiredCompanions.length > 0>> Your $hiredCompanions.length can also help, effectively multiplying your daily output by <<print ($hiredCompanions.length + 1)>>.<</if>><<if $ownedRelics.some(e => e.name === "Afar Wanderer")>>

You can use the Afar Wanderer on the cart to make the load significantly easier to move. While the wands becomes heavier, it doesn't gain the weight of the loads on top of the cart, so you can effectively drag the cart around much easier. If you use the Afar Wanderer, an average person could carry 10 loads per day on their own.<</if>><<if $ownedRelics.some(e => e.name === "Return to Sender")>>

You can mark 10 of the objects with the Return to Sender Relic, allowing you to recall all of them to your position. Unfortunately, this will reach the maximum distance for Return to Sender, but it will let you very quickly complete 10 loads in a single day.<</if>><<if $ownedRelics.some(e => e.name === "Superpositional Skewer")>>

You can use the Superpositional Skewer to touch the load with one end, then walk to the desired location, then tap yourself with the other end. This will result in you being transported back to the location of the loads and the load being transported to the destination. This effectively means you don't need to carry any heavy weights and only need to walk half the distance. This dramatically improves the efficiency of this job, allowing you to move up to 20 loads per day on your own!<</if>>

If you will be working on this job, please enter the number of days you will be working on this job now and how many dubloons you will be making.

Days:
<<textbox "$temp1" "1">>

Dubloons:
<<textbox "$temp2" "5">>

[[Confirm|Work on Heavy Lifting 2]]


<<back>>


:: Work on Land Excavation [layer7]
[img[setup.ImagePath+'Foraging/landexcavation.png']]

You'll be clearing out large chunks of dirt and stone from the walls of the Abyss, supporting the city;s eventual expansion. You get 1 dubloon for evey 2x2x2 cubit meters of dirt and rock you clear away - max 80 dubloons. You get a normal shovel and a drill to assist you. You might be here a while.

You have obtained $landExcavDubloons dubloons out of 80 dubloons max for this job.

An average human working a full day at this task can make 2 dubloons per day doing this job.<<if $playerCurses.some(e => e.name === "Weakling") || $playerCurses.some(e => e.name === "Minish-ish") && !$playerCurses.some(e => e.name === "Colossal-able")>> However, due to your weak body, you cannot excavate any significant amount of earth on your own. You'll need to either assign a companion to work this job alone or use a Relic to make any progress.<</if>><<if $playerCurses.some(e => e.name === "Colossal-able")>> However, due to your enormous size, you can move a large amount of earth with ease. While you won't have any tools, you can dig up to 40 2x2x2 cubic meters of land by digging with your bulldozer-sized hands.<</if>><<if $hiredCompanions.length > 0>> Your $hiredCompanions.length can also help, effectively multiplying your daily output by <<print ($hiredCompanions.length + 1)>>.<</if>><<if $ownedRelics.some(e => e.name === "Yliaster Materia")>>

You can use the Yliaster Materia to melt or vaporize the land you are excavating to make it much easier to move. Liquid can slide away and gas can disperse, as long as you're careful not to breathe any in. This doesn't completely trivialize the work, but it does make it go by significantly faster. The whip can help so much in the land excavation that if you use it, you alone can move up to 20 2x2x2 cubic meter chunks of earth in one day of labor.<</if>>

If you will be working on this job, please enter the number of days you will be working on this job now and how many dubloons you will be making.

Days:
<<textbox "$temp1" "1">>

Dubloons:
<<textbox "$temp2" "2">>

[[Confirm|Work on Land Excavation 2]]


<<back>>


:: Work on City Painting [layer7]
[img[setup.ImagePath+'Foraging/citypainter.png']]

You'll be redoing the paint on a number of buildings throughout the city, where the paint is old or worn. You get 1 dubloom for every 1 square km of building surface you paint, maximum 80 dubloons. You get a basic paint roller to do the job with, but you'll get docked pay (possibly extending to an outright fine) if you get significant levels of paint in an area you weren't assigned to cover.

You have obtained $cityPaintDubloons dubloons out of 80 dubloons max for this job.

An average human working a full day at this task can make 1 dubloons per day doing this job.<<if $hiredCompanions.length > 0>> Your $hiredCompanions.length can also help, effectively multiplying your daily output by <<print ($hiredCompanions.length + 1)>>.<</if>><<if $ownedRelics.some(e => e.name === "Zelus Band")>>

You can use the Zelus Band to make sure you stay focused. While this doesn't make you inherently any better at painting, you will find that being perfectly focused on a task like this can allow you to accomplish much more than you would otherwise. If you choose to wear the Zelus Band, you can earn up to 3 dubloons per day while working on this job alone.<</if>><<if $ownedRelics.some(e => e.name === "Red Thread Flourish")>>

You can use the Red Thread Flourish to serve as additional hands to paint surfaces according to your will. The threads can move intricately and significantly increase the speed at which you can paint on your own. If you use the Red Thread Flourish while painting, you can earn up to 5 dubloons per day while working this job alone.<</if>>

If you will be working on this job, please enter the number of days you will be working on this job now and how many dubloons you will be making.

Days:
<<textbox "$temp1" "1">>

Dubloons:
<<textbox "$temp2" "1">>

[[Confirm|Work on City Painting 2]]


<<back>>


:: Work on Energy Generator [layer7]
[img[setup.ImagePath+'Foraging/energygenerator.png']]

You'll be generating some energy to power the city, to be stored in case all of the hundreds of Miasma-based generator, and the emergency secondary backup generator all go out at once... Yeah, this is pointless. You'll get 4 dubloons per kWh of energy you generate, up to 80 dubloons. For this job you'll get one human-sized hamster wheel hooked up to a dynamo and energy storage unit. At a constant, sustainted, fast running pace, it'll probably take well over a full day to generat e1 kWh, and you'll need to eat and drink food and water worth much more than the energy you produce. You don't need to use the hamster wheel if you don't want to, energy from a different source can be fed into storage too.

You have obtained $energyGenDubloons dubloons out of 80 dubloons max for this job.

An average human working a full day at this task can make 2 dubloons per day doing this job.<<if $playerCurses.some(e => e.name === "Weakling") || $playerCurses.some(e => e.name === "Minish-ish") && !$playerCurses.some(e => e.name === "Colossal-able")>> However, due to your weak body, you cannot generate any significant amount of energy by running on the hamster wheel on your own. You'll need to either assign a companion to work this job alone or use a Relic to make any progress.<</if>><<if $playerCurses.some(e => e.name === "Colossal-able")>> However, due to your enormous size, you can simply use your enormous hands to rapidly spin the hamster wheel and generate a large amount of energy. Using this method, you can generate 4kWh per day for 16 dubloons payment, on your own.<</if>><<if $hiredCompanions.length > 0>> Your $hiredCompanions.length can also help, effectively multiplying your daily output by <<print ($hiredCompanions.length + 1)>>.<</if>><<if $ownedRelics.some(e => e.name === "Breathless Exhale")>>

By attaching fans to the hamster wheel and blowing it with the Breathless Exhale, you can generate much more energy with much less effort than you could by running yourself. This method could generate up to 4 kWh per day, yielding 16 dubloons per day of using the Breathless Exhale to power the wheel.<</if>><<if $ownedRelics.some(e => e.name === "Toral Wave")>>

The Toral Wave generate a significant amount of energy on its own, and you should be able to find a wire to connect it to the battery realtively easily within this city. Because the maximum output of the Toral Wave is 3000 W, you can generate 3kWh per hour you use it. So in only 1 day of "work" you can generate the full 20 kWh to get 80 dubloons, without needing to do much work yourself, though you do need to stay nearby to correct occasional disconnections and errors.<</if>>

If you will be working on this job, please enter the number of days you will be working on this job now and how many dubloons you will be making.

Days:
<<textbox "$temp1" "1">>

Dubloons:
<<textbox "$temp2" "1">>

[[Confirm|Work on Energy Generator 2]]


<<back>>


:: Work on Robo-prostitution [layer7]
[img[setup.ImagePath+'Foraging/roboprostitute.png']]

You'll be servicing various robots with artificial genitals in a wide variety of interesting shapes and sizes. I'm pretty sure they're just messing with you at this point - I mean, can't they just press a button and cum or whatever? They've set their sensitivity sp as to last roughly 3 times as long as an average human. You'll get 1 dubloon for every orgasm you cause for them.

You have obtained $roboProstituteDubloons dubloons out of 50 dubloons max for this job.

An average human working a full day at this task can make 10 dubloons per day doing this job.<<if $hiredCompanions.length > 0>> Your companions are unwilling to do this job, so they do not provide a multiplier here. You must be the prostitute yourself to make the dubloons.<</if>>

If you will be working on this job, please enter the number of days you will be working on this job now and how many dubloons you will be making.

Days:
<<textbox "$temp1" "1">>

Dubloons:
<<textbox "$temp2" "10">>

[[Confirm|Work on Robo-prostitution 2]]


<<back>>

:: Take on Libido Reinforcement E [layer7]
<<set $playerCurses.push($curse85)>><<set $corruption += $curse85.corr>><<set $LibidoLog.push($curse85)>>

You have successfully taken on the $curse85.name Curse. Hopefully you are ok with accepting the permanent consequences.

[[Accept more Curses from the seventh layer|Layer7 Curses]]
<<if $escBalDepl==0>>
	[[Return to exploring layer 7|Layer7 Hub]]
<<else>>
	[[Return to your balloon|Escape Balloon L7]]
<</if>>


:: Take on Gender Reversal E [layer7]
<<set $playerCurses.push($curse86)>><<set $corruption += $curse86.corr>><<set $GenderLog.push($curse86)>>

You have successfully taken on the $curse86.name Curse. Hopefully you are ok with accepting the permanent consequences.

[[Accept more Curses from the seventh layer|Layer7 Curses]]
<<if $escBalDepl==0>>
	[[Return to exploring layer 7|Layer7 Hub]]
<<else>>
	[[Return to your balloon|Escape Balloon L7]]
<</if>>


:: Take on Asset Robustness E [layer7]
<<set $playerCurses.push($curse87)>><<set $corruption += $curse87.corr>><<set $GenderLog.push($curse87)>><<if $app.sex=="male" && $app.breastsCor>0 >><<set $GenderLog.push("Interact E")>><</if>>

You have successfully taken on the $curse87.name Curse. Hopefully you are ok with accepting the permanent consequences.

[[Accept more Curses from the seventh layer|Layer7 Curses]]
<<if $escBalDepl==0>>
	[[Return to exploring layer 7|Layer7 Hub]]
<<else>>
	[[Return to your balloon|Escape Balloon L7]]
<</if>>



:: Take on Urine Reamplification A [layer7]
<<set $playerCurses.push($curse88)>><<set $corruption += $curse88.corr>>

You have successfully taken on the $curse88.name Curse. Hopefully you are ok with accepting the permanent consequences.

[[Accept more Curses from the seventh layer|Layer7 Curses]]
<<if $escBalDepl==0>>
	[[Return to exploring layer 7|Layer7 Hub]]
<<else>>
	[[Return to your balloon|Escape Balloon L7]]
<</if>>


:: Take on Barter System [layer7]
<<set $playerCurses.push($curse89)>><<set $corruption += $curse89.corr>>

You have successfully taken on the $curse89.name Curse. Hopefully you are ok with accepting the permanent consequences.

[[Accept more Curses from the seventh layer|Layer7 Curses]]
<<if $escBalDepl==0>>
	[[Return to exploring layer 7|Layer7 Hub]]
<<else>>
	[[Return to your balloon|Escape Balloon L7]]
<</if>>


:: Take on Shared Space [layer7]
<<set $playerCurses.push($curse90)>><<set $corruption += $curse90.corr>>

You have successfully taken on the $curse90.name Curse. Hopefully you are ok with accepting the permanent consequences.

[[Accept more Curses from the seventh layer|Layer7 Curses]]
<<if $escBalDepl==0>>
	[[Return to exploring layer 7|Layer7 Hub]]
<<else>>
	[[Return to your balloon|Escape Balloon L7]]
<</if>>


:: Take on Weakling [layer7]
<<set $playerCurses.push($curse91)>><<set $corruption += $curse91.corr>>

You have successfully taken on the $curse91.name Curse. Hopefully you are ok with accepting the permanent consequences.

[[Accept more Curses from the seventh layer|Layer7 Curses]]
<<if $escBalDepl==0>>
	[[Return to exploring layer 7|Layer7 Hub]]
<<else>>
	[[Return to your balloon|Escape Balloon L7]]
<</if>>
<<nobr>>
<<CarryAdjust>>
<</nobr>>


:: Take on Random Orgasms [layer7]
<<set $playerCurses.push($curse92)>><<set $corruption += $curse92.corr>>
You have successfully taken on the $curse92.name Curse. Hopefully you are fine with having a random interruption to whatever you're doing <<if setup.activeCurseCount("Random Orgasms") == 1>>once <<else>><<print setup.activeCurseCount("Random Orgasms")>> times<</if>> per day.

[[Accept more Curses from the seventh layer|Layer7 Curses]]
<<if $escBalDepl==0>>
	[[Return to exploring layer 7|Layer7 Hub]]
<<else>>
	[[Return to your balloon|Escape Balloon L7]]
<</if>>


:: Take on Beastly [layer7]
<<set $playerCurses.push($curse93)>><<set $corruption += $curse93.corr>>

You have successfully taken on the $curse93.name Curse. Hopefully you are ok with accepting the permanent consequences.

[[Accept more Curses from the seventh layer|Layer7 Curses]]
<<if $escBalDepl==0>>
	[[Return to exploring layer 7|Layer7 Hub]]
<<else>>
	[[Return to your balloon|Escape Balloon L7]]
<</if>>


:: Take on Creature of the Night [layer7]
<<set $playerCurses.push($curse94)>><<set $corruption += $curse94.corr>>

You have successfully taken on the $curse94.name Curse. Hopefully you are ok with accepting the permanent consequences.

[[Accept more Curses from the seventh layer|Layer7 Curses]]
<<if $escBalDepl==0>>
	[[Return to exploring layer 7|Layer7 Hub]]
<<else>>
	[[Return to your balloon|Escape Balloon L7]]
<</if>>


:: Take on Minish-ish [layer7]
<<set $playerCurses.push($curse95)>><<set $corruption += $curse95.corr>><<set $HeightLog.push($curse95)>>

You have successfully taken on the $curse95.name Curse. Hopefully you are ok with accepting the permanent consequences.

Note: Some effects of this Curse are not yet implemented.

[[Accept more Curses from the seventh layer|Layer7 Curses]]
<<if $escBalDepl==0>>
	[[Return to exploring layer 7|Layer7 Hub]]
<<else>>
	[[Return to your balloon|Escape Balloon L7]]
<</if>>
<<nobr>>
<<CarryAdjust>>
<</nobr>>

:: Take on Colossal-able [layer7]
<<set $playerCurses.push($curse96)>><<set $corruption += $curse96.corr>><<set $HeightLog.push($curse96)>>

You have successfully taken on the $curse96.name Curse. Hopefully you are ok with accepting the permanent consequences.

Note: Some effects of this Curse are not yet implemented.

[[Accept more Curses from the seventh layer|Layer7 Curses]]
<<if $escBalDepl==0>>
	[[Return to exploring layer 7|Layer7 Hub]]
<<else>>
	[[Return to your balloon|Escape Balloon L7]]
<</if>>
<<nobr>>
<<CarryAdjust>>
<</nobr>>

:: Layer7 Curses Random [layer7]
<<nobr>>
<<for $i = 0; $i < 999; $i++>>
	<<set $temp1 = random(0,11) + 84>>
	<<if ($temp1 == 84) && !$playerCurses.some(e => e.name === "Libido Reinforcement E") && $StoredCurse.name != "Libido Reinforcement E">>
		<<break>>
	<</if>>
	<<if ($temp1 == 85) && !$playerCurses.some(e => e.name === "Gender Reversal E") && $StoredCurse.name != "Gender Reversal E">>
		<<break>>
	<</if>>
	<<if ($temp1 == 86) && !$playerCurses.some(e => e.name === "Asset Robustness E") && !$playerCurses.some(e => e.name === "Shrunken Assets") && $StoredCurse.name != "Asset Robustness E" && $StoredCurse.name != "Shrunken Assets">>
		<<break>>
	<</if>>
	<<if ($temp1 == 87) && !$playerCurses.some(e => e.name === "Urine Reamplification A") && $StoredCurse.name != "Urine Reamplification A">>
		<<break>>
	<</if>>
	<<if ($temp1 == 88) && !$playerCurses.some(e => e.name === "Barter System") && $StoredCurse.name != "Barter System">>
		<<break>>
	<</if>>
	<<if ($temp1 == 89) && !(playerCurses.some(e => e.name === "Shared Space")) && $StoredCurse.name != "Shared Space">>
		<<break>>
	<</if>>
	<<if ($temp1 == 90) && !$playerCurses.some(e => e.name === "Weakling") && $StoredCurse.name != "Weakling">>
		<<break>>
	<</if>>
	<<if ($temp1 == 91) && setup.takenCurseCount("Random Orgasms") < 5>>
		<<break>>
	<</if>>
	<<if ($temp1 == 92) && !$playerCurses.some(e => e.name === "Beastly") && $StoredCurse.name != "Beastly">>
		<<break>>
	<</if>>
	<<if ($temp1 == 93) && !$playerCurses.some(e => e.name === "Creature of the Night") && $StoredCurse.name != "Creature of the Night">>
		<<break>>
	<</if>>
	<<if ($temp1 == 94) && !$playerCurses.some(e => e.name === "Minish-ish") && $StoredCurse.name != "Minish-ish" && !$playerCurses.some(e => e.name === "Colossal-able") && $StoredCurse.name != "Colossal-able">>
		<<break>>
	<</if>>
	<<if ($temp1 == 95) && !$playerCurses.some(e => e.name === "Colossal-able") && $StoredCurse.name != "Colossal-able" && !$playerCurses.some(e => e.name === "Minish-ish") && $StoredCurse.name != "Minish-ish">>
		<<break>>
	<</if>>



	<<if $i > 900>>
		<<set $temp1 = -1>>
		<<break>>
	<</if>>
<</for>>
<</nobr>>

<<if $temp1 >= 0>>
The Abyss has chosen for you to be Cursed with $curses[$temp1].name. You may not have chosen this, but fate has placed the burden upon you. Accept your Curse and the change in life that comes with it.

<<print "[[Take on " + $curses[$temp1].name + "]]">>
<<else>>
There are no Curses left for you to take on this layer.

<<back>>
<</if>>


:: Escape Balloon L7 [layer7]
<<nobr>><<set $currentLayer = 7>><<if !isPlaying("layer7")>>
	<<masteraudio stop>><<audio "layer7" volume 0.2 play loop>>
<</if>><</nobr>>
You wait as your balloon rapidly ascends and you can watch the metallic buildings shrink beneath you. Swarms of robots seems to pursue their mysterious duties as if they were ants scurrying about an anthill. Luckily they don't seem to pay much attention to the air, and even the occasional flying robot pays you no notice as you ascend towards the gate to the sixth layer.

[[Ascend to next layer|Escape Balloon L6][$corruption -= (80 - $corRed)]]
[[Hover on this layer to take in a Curse|Layer7 Curses]]
[[Get off the balloon on this layer|Layer7 Hub][$escBalDepl=0]]


:: Layer7 Cherry Relic [layer7]
<<nobr>>
<<set $temp1 = random(0,11) + 72>>
<<set $temp2 = random(0,11) + 72>>
<<for $i = 0; $i < 1; $i>>
	<<set $temp2 = random(0,11) + 72>>
	<<if $temp1 !== $temp2>>
		<<break>>
	<</if>>
<</for>>
<<set $ownedRelics.push($relics[$temp1])>>

<<set $corruption -= Math.floor(Math.max(($relics[$temp1].corr / 2) - $corRed, 0))>>
<<set $ownedRelics.push($relics[$temp2])>>

<<set $corruption -= Math.floor(Math.max(($relics[$temp2].corr / 2) - $corRed, 0))>>
<</nobr>>

The Relics you have found with Cherry's Chaotic Luck are $relics[$temp1].name and $relics[$temp2].name for a cost of <<print Math.floor(Math.max(($relics[$temp1].corr / 2) - $corRed, 0))>> and <<print Math.floor(Math.max(($relics[$temp2].corr / 2) - $corRed, 0))>> corruption respectively.

[[Continue on to the rest of the layer|Layer7 Hub]]

<<if $ownedRelics.some(e => e.name === "Devil's Own")>>

	You have a single chance to bend fate using the mystical luck of the Devil's Own. Cherry's fate is strong, so you only get 1 chance to use this effect on your entire adventure. Would you like to reroll Cherry's Chaotic Luck?

	<<link "Reroll with Devil's Own" "Layer7 Cherry Relic">>
		<<set $ownedRelics.deleteAt($ownedRelics.length-1)>>
		<<set $corruption += Math.floor(Math.max(($relics[$temp1].corr / 2) - $corRed, 0))>>
		
		<<set $ownedRelics.deleteAt($ownedRelics.length-1)>>
		<<set $corruption += Math.floor(Math.max(($relics[$temp2].corr / 2) - $corRed, 0))>>

		<<set _temp = $ownedRelics.findIndex(e=> e.name==="Devil's Own")>>
		<<set $soldRelics.push($ownedRelics[_temp])>>
		<<set $ownedRelics.deleteAt(_temp)>>
	<</link>>

<</if>>


:: Layer7 Cherry Curse [layer7]
<<nobr>>
<<set $temp1 = random(0,11) + 84>>
<<set $temp2 = random(0,11) + 84>>
<<for $i = 0; $i < 1; $i>>
	<<set $temp1 = random(0,11) + 84>>
	<<set $temp2 = random(0,11) + 84>>
	<<if ($temp1 !== $temp2) && !($playerCurses.some(e => e.name === "Shrunken Assets") && ($temp1 == 86 || $temp2 == 86) )>>
		<<break>>
	<</if>>
<</for>>
<<set $playerCurses.push($curses[$temp1])>>
<<set $corruption += Math.round(Math.max(($curses[$temp1].corr * 3 / 2), 0))>>
<<set $playerCurses.push($curses[$temp2])>>
<<set $corruption += Math.round(Math.max(($curses[$temp2].corr * 3 / 2), 0))>>
<</nobr>>

The Curses you have obtained with Cherry's Chaotic Luck are $curses[$temp1].name and $curses[$temp2].name for a cost of <<print Math.round(Math.max(($curses[$temp1].corr * 3 / 2) - $corRed, 0))>> and <<print Math.round(Math.max(($curses[$temp2].corr * 3 / 2) - $corRed, 0))>> corruption respectively.

[[Continue on to the rest of the layer|Layer7 Hub]]

<<nobr>>
<<if $curses[$temp1].name == "Libido Reinforcement E" || $curses[$temp2].name == "Libido Reinforcement E">>
	<<set $LibidoLog.push($curse85)>>
<</if>>
<<if $curses[$temp1].name == "Gender Reversal E" || $curses[$temp2].name == "Gender Reversal E" >>
	<<set $GenderLog.push($curse86)>>
<</if>>
<<if $curses[$temp1].name == "Asset Robustness E" || $curses[$temp2].name == "Asset Robustness E" >>
	<<set $GenderLog.push($curse87)>><<if $app.sex=="male" && $app.breastsCor>0 >><<set $GenderLog.push("Interact E")>><</if>>
<</if>>
<<if $curses[$temp1].name == "Weakling" || $curses[$temp2].name == "Weakling">>
	<<set $playerCurses.push($curse91)>>
<</if>>
<<if $curses[$temp1].name == "Minish-ish" || $curses[$temp2].name == "Minish-ish">>
	<<set $HeightLog.push($curse95)>>
<</if>>
<<if $curses[$temp1].name == "Colossal-able" || $curses[$temp2].name == "Colossal-able">>
	<<set $HeightLog.push($curse96)>>
<</if>>

<</nobr>>
<<if $ownedRelics.some(e => e.name === "Devil's Own")>>

	You have a single chance to bend fate using the mystical luck of the Devil's Own. Cherry's fate is strong, so you only get 1 chance to use this effect on your entire adventure. Would you like to reroll Cherry's Chaotic Luck?

	<<link "Reroll with Devil's Own" "Layer7 Cherry Curse">>
		<<set $targetCurse = $curses[$temp1]>>
		<<set $corruption -= $playerCurses[$playerCurses.length - 1].corr>>
		<<if $curses[$temp1].type == "Gender" >>
			<<set _temp = $GenderLog.length>>
			<<if $GenderLog[_temp-1].name == "Interact A" || $GenderLog[_temp-1].name == "Interact B" || $GenderLog[_temp-1].name == "Interact C" || $GenderLog[_temp-1].name == "Interact D" || $GenderLog[_temp-1].name == "Interact E">>
				<<set $GenderLog.deleteAt(_temp-1)>>
			<</if>>
		<</if>>
		<<include "CurseRemoval">>
		
		<<set $targetCurse = $curses[$temp2]>>
		<<set $corruption -= $playerCurses[$playerCurses.length - 1].corr>>
		<<if $curses[$temp2].type == "Gender" >>
			<<set _temp = $GenderLog.length>>
			<<if $GenderLog[_temp-1].name == "Interact A" || $GenderLog[_temp-1].name == "Interact B" || $GenderLog[_temp-1].name == "Interact C" || $GenderLog[_temp-1].name == "Interact D" || $GenderLog[_temp-1].name == "Interact E">>
				<<set $GenderLog.deleteAt(_temp-1)>>
			<</if>>
		<</if>>
		<<include "CurseRemoval">>

		<<set _temp = $ownedRelics.findIndex(e=> e.name==="Devil's Own")>>
		<<set $soldRelics.push($ownedRelics[_temp])>>
		<<set $ownedRelics.deleteAt(_temp)>>
	<</link>>

<</if>>


:: Layer7 Cherry Mix [layer7]
<<nobr>>
<<set $temp1 = random(0,11) + 72>>
<<for $i = 0; $i < 1; $i>>
	<<set $temp2 = random(0,11) + 84>>
	<<if !($playerCurses.some(e => e.name === "Shrunken Assets") &&  $temp2 == 86 )>>
		<<break>>
	<</if>>
<</for>>
<<set $ownedRelics.push($relics[$temp1])>>

<<set $corruption -= Math.floot(Math.max(($relics[$temp1].corr / 2) - $corRed, 0))>>
<<set $playerCurses.push($curses[$temp2])>>
<<set $playerCurses[$playerCurses.length - 1].corr = Math.round(Math.max(($curses[$temp2].corr * 1.5), 0))>>
<<set $corruption += $playerCurses[$playerCurses.length - 1].corr>>
<</nobr>>

With Cherry's Chaotic Luck you have found the Relic $relics[$temp1].name for a cost of <<print Math.floor(Math.max(($relics[$temp1].corr / 2) - $corRed, 0))>> corruption and obtained the Curse $curses[$temp2].name for a gain of <<print Math.round(Math.max(($curses[$temp2].corr * 1), 0))>> corruption respectively.

[[Continue on to the rest of the layer|Layer7 Hub]]

<<nobr>>
<<if $curses[$temp2].name == "Libido Reinforcement E">>
	<<set $LibidoLog.push($curse85)>>
<</if>>
<<if $curses[$temp2].name == "Gender Reversal E">>
	<<set $GenderLog.push($curse86)>>
<</if>>
<<if $curses[$temp2].name == "Asset Robustness E">>
	<<set $GenderLog.push($curse87)>><<if $app.sex=="male" && $app.breastsCor>0 >><<set $GenderLog.push("Interact E")>><</if>>
<</if>>
<<if $curses[$temp2].name == "Weakling">>
	<<set $playerCurses.push($curse91)>>
<</if>>
<<if $curses[$temp2].name == "Minish-ish">>
	<<set $HeightLog.push($curse95)>>
<</if>>
<<if $curses[$temp2].name == "Colossal-able">>
	<<set $HeightLog.push($curse96)>>
<</if>>

<</nobr>>
<<if $ownedRelics.some(e => e.name === "Devil's Own")>>

	You have a single chance to bend fate using the mystical luck of the Devil's Own. Cherry's fate is strong, so you only get 1 chance to use this effect on your entire adventure. Would you like to reroll Cherry's Chaotic Luck?

	<<link "Reroll with Devil's Own" "Layer7 Cherry Mix">>
		<<set $ownedRelics.deleteAt($ownedRelics.length-1)>>
		<<set $corruption += Math.floor(Math.max(($relics[$temp1].corr / 2) - $corRed, 0))>>
		
		<<set $targetCurse = $curses[$temp2]>>
		<<set $corruption -= $playerCurses[$playerCurses.length - 1].corr>>
		<<if $curses[$temp2].type == "Gender" >>
			<<set _temp = $GenderLog.length>>
			<<if $GenderLog[_temp-1].name == "Interact A" || $GenderLog[_temp-1].name == "Interact B" || $GenderLog[_temp-1].name == "Interact C" || $GenderLog[_temp-1].name == "Interact D" || $GenderLog[_temp-1].name == "Interact E">>
				<<set $GenderLog.deleteAt(_temp-1)>>
			<</if>>
		<</if>>
		<<include "CurseRemoval">>
		<<set _temp = $ownedRelics.findIndex(e=> e.name==="Devil's Own")>>
		<<set $soldRelics.push($ownedRelics[_temp])>>
		<<set $ownedRelics.deleteAt(_temp)>>
	<</link>>

<</if>>


:: Layer7 Forge2 [layer7]
<<nobr>>
<<if $temp1 < 0>>
Choose the first Relic you would like to swap:<br><br>
<<for $i = 0; $i < $ownedRelics.length; $i++>>
	<<capture $i>>
		<<print "[[$ownedRelics[$i].name|Layer7 Forge2][$temp1 = $i]]">><br>
	<</capture>>
<</for>>
<<elseif $temp1 >= 0 && $temp2 < 0>>
Choose the second Relic you would like to swap:<br><br>
<<for $i = 0; $i < $ownedRelics.length; $i++>>
	<<capture $i>>
		<<if $i != $temp1>><<print "[[$ownedRelics[$i].name|Layer7 Forge2][$temp2 = $i]]">><br><</if>>
	<</capture>>
<</for>>
<<else>>
An enormous snapping sound erupts from the Clockwork Forge as the mechanism shuts, obscuring your Relics from view. Suddenly, a horrendous grinding is audible inside the machine, but after only a few seconds it quiets down once again, then becomes silent as the Forge opens up again, revealing your Relics along with a bit of steam that drifts upwards from the Forge.<br><br>

You retrieve your Relics and find that you have successfully switched the abilities of the $ownedRelics[$temp1].name and the $ownedRelics[$temp2].name. <br><br>

[[Continue your business on the seventh layer|Layer7 Hub]]<br><br>

<<set $tempTime = 2>>
<<include "GeneralTimeSetup">><<include "GeneralTimeStats">>
<<set $dubloons -= 4>>

<<set $temp = $relicSwap.length>>
<<set $relicSwap.push([$ownedRelics[$temp1], $ownedRelics[$temp2]])>>


<</if>>
<</nobr>>


:: Layer7 Tax End [image layer7]
You have no choice, you gain consciousness a few times to see yourself in a surgery room where your organic parts are replaced with reliable, mechanical alternatives. But you don't fully regain consciousness until you've been fully subdued and are ready to become a productive piece of the machinery of the city.

[img[setup.ImagePath+'Clipped-Fin/Abyss Diver Page 8-habitation.png']]

@@.layerTitle;GAME OVER@@


:: Layer7 Ascend2 [layer7]
<<nobr>>
<<if $DaedalusFly==true>>
	<<include "Companions Stranded">>
<</if>>

<<if $layerExit == 0>>
	<<set $layerExit = 1>>
	<<set $tempTime = 7>>
	<<if $DaedalusFly==true>>
		<<set $tempTime= Math.ceil($tempTime/2)>>
	<</if>>
	$tempTime
	<<include "GeneralTimeSetup">>
	<<set $layerExitTime=$tempTime>>
	$layerExitTime
<</if>>

<<for $layerExitTime; $layerExitTime >0; $layerExitTime-->>

	<<set $tempTime = 1>>
	<<include "GeneralTimeStats">>

	<<if $dubloons < 0>>
		<br>[img[setup.ImagePath+'Threats/taxdrone.png']]<br><br>

		<br>A quiet humming sound descends upon you as you see the Taxdrone floating towards you from over a nearby building. You reach into your pack to get your typical dubloon payment, but then you realize something is wrong, you can't find any dubloons! Perhaps you didn't keep track of them properly? But it's too late to get any now, the taxes are already due.<br><br>

		The Taxdrone patiently requests that you submit your taxes as it displays a slot for you to deposit the dubloons into, but soon it realizes you will not be paying and the typically soft blue lights on the drone change to glaring red and an alarm sounds.<br><br>

		Within a moment you are restrained by nets made of light and you feel a prick on your neck. You notice the drone has stabbed you with a syringe, but at this point it's too late to resist and your consciousness begins to fade, leaving you to succumb to your fate.<br><br>

		You are now forced to become a permanent resident of Layer 7.<br><br>

		[[Awaken to your new life|Layer7 Tax End]]<br><br>

		<<break>>
	<</if>>
		
	<<if $timeL7T2 > 5>>
		<br>A an enormous rumbling catches your attention as you walk through the seventh layer. A brief glance around reveals the source, an enormous, building-sized machine that is now rapidly approaching you. You consider running, but the Security Robot is moving at an incredible speed, leaving you no chance to get away. <br><br>

		"ACCEPT REHABILITATION" a synthetic voice calls out, with the huge robot nearly upon you. <br><br>

		And suddenly, it's here, reaching down to grab you with shining metallic arms and pull you into its shell.<br><br>

		[[Get rehabilitated|Layer7 Threat2 Ascend]]<br><br>
		<<break>>
	<</if>>
<</for>>


<</nobr>>
<<if $layerExitTime == 0>>
	<<nobr>>
	<<set $corruption -= (80 - $corRed)>>
	/* 
	<<set $timeL6T1 = 0>>
	<<set $timeL6T2 = 0>>
	*/
	<</nobr>>
	Surprisingly, the ascent up to the sixth layer is relatively easy. While you did need to deal with the typical, meddlesome robots, there weren't any additional obstacles in your path.

	When you reach the pinacle of the layer, you once again approach the series of barricades holding back the sea of tenatcles and flames from reaching the pristine city, but this time you are exiting back to the hellish landscape of the sixth layer.

	<<include "Curse Descriptions">>
	<<if $TwinFly == true>>
		<<include "Twin rejoin">>
	<</if>>
	[[Return to the Sixth layer|Layer6 Hub]]

<</if>>


:: Layer7 Threat2 Ascend [layer7]
<<nobr>>
<<set $timeL7T2 -= 6>>
<<set $tempTime = 1>>
<<include "GeneralTimeStats">>
<</nobr>>
[img[setup.ImagePath+'Threats/securityrobot.png']]

<<if $playerCurses.some(e => e.name === "Hypno Happytime") && $layer7Hypno < 3>><<set $layer7Hypno += 1>>
	After you are pulled into the giant security robot, you are placed in a cell and bombarded with propaganda recordings about life in the city and your place in it. It seems to be nonsense, why would you want to serve organics? You are an organic!

	Of course you can't tone it all out, but it's pretty easy to keep your eyes on what matters and you patiently wait until the time is up and you are released.

	[[Continue your ascent to the sixth layer|Layer7 Ascend2]]

<<elseif $playerCurses.some(e => e.name === "Hypno Happytime") && $layer7Hypno < 5>><<set $layer7Hypno += 1>>
	Once again, you are pulled into the security robot to hear the familiar tales of how to be a productive part of society.

	For some reason, you find yourself paying a but more attention to the videos and voices, and you realize that they're not actually as ridiculous as you first thought.

	Sure, you're free right now, but with subservience can come great pleasure, and what greater pursuit in life is there than pleasure? Your pleasure centers could be continually stimulated by following orders and following what is demanded of you.

	Fine, you're an organic being, but the miraculous technology of the city could change that, they could change you so that you fit neatly into the mechanisms of society here. No need to let your messy fleshy bits get in the way of a better life for you and everyone else.

	Yeah, you do have goals of things you want to do, but why are your goals more important than the goals of an entire city? Especially when they are as grand as the City of Agartha preparing for the future awakening of its organic population!

	When the robot releases you, you are tempted to go back and take up residence here, but shake off the feeling and continue your journey.

	[[Continue your ascent to the sixth layer|Layer7 Ascend2]]

<<elseif $playerCurses.some(e => e.name === "Hypno Happytime") && $layer7Hypno == 5>>
	Once again, you are pulled into the security robot to hear the familiar tales of how to be a productive part of society. And yeah, you do wish you were a better member of society, don't you?

	The arguments they are making actually make perfect sense, they seem to precisely match your own thoughts actually. As if they were molded to you (or the other way around.)

	With subservience can come great pleasure, and what greater pursuit in life is there than pleasure? Your pleasure centers could be continually stimulated by following orders and following what is demanded of you.

	The miraculous technology of the city could change that, they could change your organic body so that you fit neatly into the mechanisms of society here. No need to let your messy fleshy bits get in the way of a better life for you and everyone else.

	Why are your goals more important than the goals of an entire city? Especially when they are as grand as the City of Agartha preparing for the future awakening of its organic population!

	When the robot releases you, you are free to go, but you do not use that freedom.

	Now is your chance, you've found a place where you belong.

	It's time to stay in your new home.

	You tell the robot that you are ready to take your place as a gear in the mechanism of society and almost immediately a syringe comes out of the wall and pokes your neck. You smile as your consciousness fades.

	[[Awaken to your new life|Layer7 Tax End]]

<<else>>

	After you are pulled into the giant security robot, you are placed in a cell and bombarded with propaganda recordings about life in the city and your place in it. It seems to be nonsense, why would you want to serve organics? You are an organic!

	The biggest threat here is your boredom, honestly. While you try to fall asleep the robot makes an effort to keep you awake, in a kind of minor psychological torture through annoyance.

	Eventually you are released though, with no harm done, and ready to continue your journey in the seventh layer.

	[[Continue your ascent to the sixth layer|Layer7 Ascend2]]

<</if>>


:: Layer7 Exit2 [layer7]
<<nobr>>
<<if $layerExit == 0>>
	<<set $layerExit = 1>>
	<<set $tempTime = 8>>
	<<include "GeneralTimeSetup">>
	<<set $layerExitTime=$tempTime>>
<</if>>

<<for $layerExitTime; $layerExitTime >0; $layerExitTime-->>

	<<set $tempTime = 1>>
	<<include "GeneralTimeStats">>


	<<if $dubloons < 0>>
		<br>[img[setup.ImagePath+'Threats/taxdrone.png']]<br><br>

		<br>A quiet humming sound descends upon you as you see the Taxdrone floating towards you from over a nearby building. You reach into your pack to get your typical dubloon payment, but then you realize something is wrong, you can't find any dubloons! Perhaps you didn't keep track of them properly? But it's too late to get any now, the taxes are already due.<br><br>

		The Taxdrone patiently requests that you submit your taxes as it displays a slot for you to deposit the dubloons into, but soon it realizes you will not be paying and the typically soft blue lights on the drone change to glaring red and an alarm sounds.<br><br>

		Within a moment you are restrained by nets made of light and you feel a prick on your neck. You notice the drone has stabbed you with a syringe, but at this point it's too late to resist and your consciousness begins to fade, leaving you to succumb to your fate.<br><br>

		You are now forced to become a permanent resident of Layer 7.<br><br>

		[[Awaken to your new life|Layer7 Tax End]]<br><br>

		<<break>>
	<</if>>
		
	<<if $timeL7T2 > 5>>
		<br>A an enormous rumbling catches your attention as you walk through the seventh layer. A brief glance around reveals the source, an enormous, building-sized machine that is now rapidly approaching you. You consider running, but the Security Robot is moving at an incredible speed, leaving you no chance to get away. <br><br>

		"ACCEPT REHABILITATION" a synthetic voice calls out, with the huge robot nearly upon you. <br><br>

		And suddenly, it's here, reaching down to grab you with shining metallic arms and pull you into its shell.<br><br>

		[[Get rehabilitated|Layer7 Threat2 Descend]]<br><br>
		<<break>>
	<</if>>

<</for>>


<</nobr>><<if $layerExitTime == 0>>
/* 
<<set $timeL8T1 = 0>>\
<<set $timeL8T2 = 0>>\
*/
	After days of travel, you reach the bottom of the city. What awaits you is an enormous, circular gate, embedded into the ground at the lowest point of the city, almost like an elaborat emanhole cover.

	The rest of the layer slopes up all around it, every direction funneling down into it. There is no other way downward except through the other side of this gate. Will you push it open, and continue to push yourself ever downward?

	[[Descend into the circular gate|Layer8 1]]
<</if>>


:: Layer7 Threat2 Descend [layer7]
<<nobr>>
<<set $timeL7T2 -= 6>>
<<set $tempTime = 1>>
<<include "GeneralTimeSetup">>	<<include "GeneralTimeStats">>
<</nobr>>
[img[setup.ImagePath+'Threats/securityrobot.png']]

<<if $playerCurses.some(e => e.name === "Hypno Happytime") && $layer7Hypno < 3>><<set $layer7Hypno += 1>>
	After you are pulled into the giant security robot, you are placed in a cell and bombarded with propaganda recordings about life in the city and your place in it. It seems to be nonsense, why would you want to serve organics? You are an organic!

	Of course you can't tone it all out, but it's pretty easy to keep your eyes on what matters and you patiently wait until the time is up and you are released.

	[[Continue your descent to the eighth layer|Layer7 Exit2]]

<<elseif $playerCurses.some(e => e.name === "Hypno Happytime") && $layer7Hypno < 5>><<set $layer7Hypno += 1>>
	Once again, you are pulled into the security robot to hear the familiar tales of how to be a productive part of society.

	For some reason, you find yourself paying a but more attention to the videos and voices, and you realize that they're not actually as ridiculous as you first thought.

	Sure, you're free right now, but with subservience can come great pleasure, and what greater pursuit in life is there than pleasure? Your pleasure centers could be continually stimulated by following orders and following what is demanded of you.

	Fine, you're an organic being, but the miraculous technology of the city could change that, they could change you so that you fit neatly into the mechanisms of society here. No need to let your messy fleshy bits get in the way of a better life for you and everyone else.

	Yeah, you do have goals of things you want to do, but why are your goals more important than the goals of an entire city? Especially when they are as grand as the City of Agartha preparing for the future awakening of its organic population!

	When the robot releases you, you are tempted to go back and take up residence here, but shake off the feeling and continue your journey.

	[[Continue your descent to the eighth layer|Layer7 Exit2]]

<<elseif $playerCurses.some(e => e.name === "Hypno Happytime") && $layer7Hypno == 5>>
	Once again, you are pulled into the security robot to hear the familiar tales of how to be a productive part of society. And yeah, you do wish you were a better member of society, don't you?

	The arguments they are making actually make perfect sense, they seem to precisely match your own thoughts actually. As if they were molded to you (or the other way around.)

	With subservience can come great pleasure, and what greater pursuit in life is there than pleasure? Your pleasure centers could be continually stimulated by following orders and following what is demanded of you.

	The miraculous technology of the city could change that, they could change your organic body so that you fit neatly into the mechanisms of society here. No need to let your messy fleshy bits get in the way of a better life for you and everyone else.

	Why are your goals more important than the goals of an entire city? Especially when they are as grand as the City of Agartha preparing for the future awakening of its organic population!

	When the robot releases you, you are free to go, but you do not use that freedom.

	Now is your chance, you've found a place where you belong.

	It's time to stay in your new home.

	You tell the robot that you are ready to take your place as a gear in the mechanism of society and almost immediately a syringe comes out of the wall and pokes your neck. You smile as your consciousness fades.

	[[Awaken to your new life|Layer7 Tax End]]

<<else>>

	After you are pulled into the giant security robot, you are placed in a cell and bombarded with propaganda recordings about life in the city and your place in it. It seems to be nonsense, why would you want to serve organics? You are an organic!

	The biggest threat here is your boredom, honestly. While you try to fall asleep the robot makes an effort to keep you awake, in a kind of minor psychological torture through annoyance.

	Eventually you are released though, with no harm done, and ready to continue your journey in the seventh layer.

	[[Continue your descent to the eighth layer|Layer7 Exit2]]

<</if>>


:: Work on Heavy Lifting 2 [layer7]
<<nobr>>
<<set $temp1 = parseInt($temp1)>>
<<set $temp2 = parseInt($temp2)>>
<<if $temp2 <= 80 - $heavyLiftDubloons && $temp2 >= 0>>
	<<set $heavyLiftDubloons += $temp2>>
	<<elseif $temp2 < 0>>
	<<set $temp2 = 0>>
	<<else>>
	<<set $temp2 = 80 - $heavyLiftDubloons>>
	<<set $heavyLiftDubloons += $temp2>>
<</if>>
<<set $dubloons += $temp2>>
<<set $tempTime = $temp1>>
<<if $tempTime < 0>>
	<<set $tempTime = 0>>
<</if>>
<<include "GeneralTimeStats">>
<</nobr>>
[img[setup.ImagePath+'Foraging/heavylifting.png']]

You have worked $temp1 days and moved $temp2 loads of "construction material" to earn $temp2 dubloons.

[[Continue exploring the seventh layer|Layer7 Hub]]


:: Work on Land Excavation 2 [layer7]
<<nobr>>
<<set $temp1 = parseInt($temp1)>>
<<set $temp2 = parseInt($temp2)>>
<<if $temp2 <= 80 - $landExcavDubloons && $temp2 >= 0>>
	<<set $landExcavDubloons += $temp2>>
	<<elseif $temp2 < 0>>
	<<set $temp2 = 0>>
	<<else>>
	<<set $temp2 = 80 - $landExcavDubloons>>
	<<set $landExcavDubloons += $temp2>>
<</if>>
<<set $dubloons += $temp2>>

<<set $tempTime = $temp1>>
<<if $tempTime < 0>>
	<<set $tempTime = 0>>
<</if>>
<<include "GeneralTimeStats">>
<</nobr>>
[img[setup.ImagePath+'Foraging/landexcavation.png']]

You have worked $temp1 days and excavated $temp2 2x2x2 cubic meters of earth to earn $temp2 dubloons.

[[Continue exploring the seventh layer|Layer7 Hub]]


:: Work on City Painting 2 [layer7]
<<nobr>>
<<set $temp1 = parseInt($temp1)>>
<<set $temp2 = parseInt($temp2)>>
<<if $temp2 <= 80 - $cityPaintDubloons && $temp2 >= 0>>
	<<set $cityPaintDubloons += $temp2>>
	<<elseif $temp2 < 0>>
	<<set $temp2 = 0>>
	<<else>>
	<<set $temp2 = 80 - $cityPaintDubloons>>
	<<set $cityPaintDubloons += $temp2>>
<</if>>
<<set $dubloons += $temp2>>

<<set $tempTime = $temp1>>
<<if $tempTime < 0>>
	<<set $tempTime = 0>>
<</if>>
<<include "GeneralTimeStats">>
<</nobr>>
[img[setup.ImagePath+'Foraging/citypainter.png']]

You have worked $temp1 days and painted $temp2 square km of building surface to earn $temp2 dubloons.

[[Continue exploring the seventh layer|Layer7 Hub]]


:: Work on Energy Generator 2 [layer7]
<<nobr>>
<<set $temp1 = parseInt($temp1)>>
<<set $temp2 = parseInt($temp2)>>
<<if $temp2 <= 80 - $energyGenDubloons && $temp2 >= 0>>
	<<set $energyGenDubloons += $temp2>>
	<<elseif $temp2 < 0>>
	<<set $temp2 = 0>>
	<<else>>
	<<set $temp2 = 80 - $energyGenDubloons>>
	<<set $energyGenDubloons += $temp2>>
<</if>>
<<set $dubloons += $temp2>>

<<set $tempTime = $temp1>>
<<if $tempTime < 0>>
	<<set $tempTime = 0>>
<</if>>
<<include "GeneralTimeStats">>
<</nobr>>
[img[setup.ImagePath+'Foraging/energygenerator.png']]

You have worked $temp1 days and generated <<print ($temp2 / 4)>> kWh of energy to earn $temp2 dubloons.

[[Continue exploring the seventh layer|Layer7 Hub]]


:: Work on Robo-prostitution 2 [layer7]
<<nobr>>
<<set $temp1 = parseInt($temp1)>>
<<set $temp2 = parseInt($temp2)>>
<<if $temp2 <= 80 - $roboProstituteDubloons && $temp2 >= 0>>
	<<set $roboProstituteDubloons += $temp2>>
	<<elseif $temp2 < 0>>
	<<set $temp2 = 0>>
	<<else>>
	<<set $temp2 = 80 - $roboProstituteDubloons>>
	<<set $roboProstituteDubloons += $temp2>>
<</if>>
<<set $dubloons += $temp2>>

<<set $tempTime = $temp1>>
<<if $tempTime < 0>>
	<<set $tempTime = 0>>
<</if>>
<<include "GeneralTimeStats">>
<</nobr>>
[img[setup.ImagePath+'Foraging/energygenerator.png']]

You have worked $temp1 days and brought robots to artificial orgasm $temp2 times to earn $temp2 dubloons.

[[Continue exploring the seventh layer|Layer7 Hub]]
